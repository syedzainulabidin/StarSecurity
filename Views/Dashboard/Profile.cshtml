@using System.Security.Claims
@model Employee
@{
    ViewData["Title"] = "My Profile";
    var role = User.FindFirst(ClaimTypes.Role)?.Value;
    if(role == "admin")
    {
        Layout = "_Admin_Dashboard_Layout";

    }
    else
    {
        Layout = "_Employee_Dashboard_Layout";
    }
}

<section class="relative py-20 px-8 lg:px-16 overflow-hidden">

    <!-- Background -->
    <div class="absolute top-[-10%] left-[-10%] h-[600px] w-[600px] rounded-full bg-blue-900/20 blur-[120px]"></div>
    <div class="absolute bottom-[-10%] right-[-10%] h-[600px] w-[600px] rounded-full bg-blue-900/10 blur-[120px]"></div>

    <div class="relative z-10 max-w-3xl mx-auto">

        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl lg:text-6xl font-anton uppercase tracking-tight text-yellow-600">
                MY <span class="text-white">PROFILE</span>
            </h1>
        </div>

        <!-- Alerts -->
        @if (TempData["Message"] != null)
        {
            <div class="mb-6 p-4 bg-blue-900/30 border border-blue-500/30 rounded-xl text-blue-300">
                @TempData["Message"]
            </div>
        }

        <!-- Profile Form -->
        <form method="post" asp-controller="Dashboard" asp-action="UpdateProfile" class="bg-white/5 backdrop-blur-xl border border-white/10 p-8 rounded-[2rem] shadow-2xl">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="Id" />

            <div class="mb-4">
                <label asp-for="Name" class="block text-gray-300 font-semibold mb-1"></label>
                <input asp-for="Name" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" required />
                <span asp-validation-for="Name" class="text-red-500 text-sm"></span>
            </div>

            <div class="mb-4">
                <label asp-for="Email" class="block text-gray-300 font-semibold mb-1"></label>
                <input asp-for="Email" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" readonly />
                <small class="text-gray-400 text-sm">Email cannot be changed.</small>
            </div>

            <div class="mb-4">
                <label asp-for="Contact" class="block text-gray-300 font-semibold mb-1"></label>
                <input asp-for="Contact" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" required />
                <span asp-validation-for="Contact" class="text-red-500 text-sm"></span>
            </div>

            <div class="mb-4">
                <label asp-for="Address" class="block text-gray-300 font-semibold mb-1"></label>
                <input asp-for="Address" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" />
            </div>

            <div class="mb-4">
                <label asp-for="QualificationId" class="block text-gray-300 font-semibold mb-1">Qualification</label>
                <select asp-for="QualificationId" asp-items="ViewBag.Qualifications" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white">
                    <option value="">-- Select --</option>
                </select>
            </div>

            @if (role == "admin")
            {
                <div class="mb-4">
                    <label asp-for="ServiceId" class="block text-gray-300 font-semibold mb-1">Service / Department</label>
                    <select asp-for="ServiceId" asp-items="ViewBag.Services" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white">
                        <option value="">-- Select --</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label asp-for="Grade" class="block text-gray-300 font-semibold mb-1"></label>
                    <input asp-for="Grade" class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" />
                </div>
            }
            else
            {
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">Service / Department</label>
                    <input class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" value="@Model.Service?.Title" readonly />
                </div>

                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">Grade</label>
                    <input class="w-full px-4 py-2 rounded-xl bg-black/40 border border-white/10 text-white" value="@Model.Grade" readonly />
                </div>
            }

            <div class="flex gap-4 mt-6">
                <button type="submit" class="px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-xl font-bold uppercase">
                    Update Profile
                </button>
                <a href="/dashboard" class="px-6 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold uppercase">
                    Back to Dashboard
                </a>
            </div>
        </form>
    </div>
</section>
